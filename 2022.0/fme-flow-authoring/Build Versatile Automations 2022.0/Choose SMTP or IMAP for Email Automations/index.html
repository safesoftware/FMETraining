<h2 id="learning-objectives">Learning Objectives</h2>
<p>After completing this lesson, you&rsquo;ll be able to:</p>
<ul>
<li>Explain the differences between SMTP and IMAP.</li>
<li>Awareness of available email templates.</li>
</ul>
<h2 id="an-introduction-to-email-in-automations">An Introduction to Email in Automations</h2>
<p>It&rsquo;s important to cover email notifications in some detail because they are one of the most commonly used protocol types on FME Server.</p>
<p>&ldquo;Email&rdquo; is a protocol that may be used by both Trigger and Action components in an Automations workflow. Email Triggers receive incoming emails from external clients, and Email Actions send emails out to an external account.</p>
<h2 id="email-protocols">Email Protocols</h2>
<p>In fact, email is not a single protocol. There are several methods of email transfer that exist. FME Server supports two of these email-related protocols:&nbsp;<strong>SMTP</strong>&nbsp;and&nbsp;<strong>IMAP</strong>.</p>
<p>SMTP (Simple Mail Transfer Protocol) is the ability to&nbsp;<em>directly</em>&nbsp;receive an email through an email server built into FME Server, or&nbsp;<em>indirectly</em>&nbsp;send an email through an SMTP service, for example, a Gmail account.</p>
<p>IMAP (Internet Message Access Protocol) is an&nbsp;<em>indirect</em>&nbsp;process that connects to an email account on a server elsewhere. When that account receives an email, the IMAP protocol passes it on to FME Server.</p>
<h2 id="smtp-trigger">SMTP Trigger</h2>
<p>SMTP Triggers are used when data is sent to FME Server via a direct email. FME Server receives an email and triggers an Action in response.</p>
<p>Such triggers are possible because FME Server includes a built-in email server as one of its components. However, this does require that the hostname and domain of your FME Server should resolve to a publicly accessible IP or DNS.</p>
<div>
<div class="box message info">
<div class="inner">
<div class="bd">
<div class="media">
<blockquote><img class="img mtm" role="presentation" src="https://safemytrailhead.s3.us-west-2.amazonaws.com/images/safe_note.png" alt="Note" /></blockquote>
<div class="mediaBd">
<div class="message-media-content">
<blockquote>
<p>The steps to set up the built-in email server for notifications are documented in the&nbsp;<a href="https://docs.safe.com/fme/html/FME_Server_Documentation/AdminGuide/Configuring_FME_Server_to_Receive_Email.htm" target="_blank" rel="noreferrer noopener">FME Server Reference Manual</a>.</p>
</blockquote>
</div>
</div>
</div>
</div>
</div>
</div>
<p>However, FME Cloud instances are automatically configured for email notifications and have a public domain name too, so you don&rsquo;t need to do any additional setup.</p>
</div>
<h2 id="creating-an-smtp-trigger">Creating an SMTP Trigger</h2>
<p>Creating an SMTP Trigger is done in the Automations &gt; Build Automation section of the FME Server web interface, by choosing the Email - SMTP (received) protocol as a new Trigger.</p>
<p><img class="image image-block image-center" src="https://s3-us-west-2.amazonaws.com/safemytrailhead/modules/build-versatile-automations/choose-smtp-or-imap-for-email-automations/images/1657139857495.png" alt="Configuring Email - SMTP Details" /></p>
<p>Once the protocol type is selected, only the Email User Name parameter must be configured. This does not need to be an existing user or email; in the above example, it is set up to be AuthoringCourse. Note that you do not need to specify&nbsp;<em>@FMEServer-Hostname.com</em>&nbsp;in the Email User Name parameter.</p>
<p>To construct the full email address, combine the Email Username with your FMEServer hostname. Now, for this example, whenever an email is sent to AuthoringCourse@<em>YourFMEServerHostname</em>&nbsp;this Automation will receive an incoming message that contains the entire contents of that email, including the from and to address, and any attachments. This information is all processed by FME Server so it can be used to trigger an Action downstream in the workspace.</p>
<p>In the SMTP trigger, there is an Optional Parameter to specify the location to download any email attachments to. If this is not defined, the attachments will still be saved to a temporary location on FME Server.</p>
<h2 id="imap-triggers">IMAP Triggers</h2>
<p>IMAP (Internet Message Access Protocol) is a variation on email for incoming notifications.</p>
<p>Instead of using the built-in email server, an IMAP Trigger connects to another email server and monitors it for incoming email. When a new email arrives in that account, the Automation is triggered.</p>
<h2 id="creating-an-imap-trigger">Creating an IMAP Trigger</h2>
<p>Like the SMTP protocol, IMAP Triggers are set up in the Automations &gt; Build Automation section of the web interface by creating a new or adding to an existing Automation, but this time choosing the Email -IMAP (received) protocol:</p>
<p><img class="image image-block image-center" src="https://s3-us-west-2.amazonaws.com/safemytrailhead/modules/build-versatile-automations/choose-smtp-or-imap-for-email-automations/images/1657139904992.png" alt="Configuring Email - IMAP Details" /></p>
<p>This Trigger has significantly more parameters, most are for defining the IMAP (Email) server connection.</p>
<p>There are two important parameters that let you decide what and when to watch this Email Server. Poll Interval determines how often FME Server should check for emails. Emails to Fetch decides whether to fetch all unread emails or new emails only.</p>
<p>Like the SMTP Protocol, there is a parameter to select an FME Server resource location in which to store any email attachments.</p>
<div>&nbsp;</div>
<div class="box message info">
<div class="inner">
<div class="bd">
<div class="media">
<blockquote><img class="img mtm" role="presentation" src="https://safemytrailhead.s3.us-west-2.amazonaws.com/images/safe_note.png" alt="Note" /></blockquote>
<div class="mediaBd">
<div class="message-media-content">
<blockquote>
<p>Most email servers support IMAP functionality, as do the majority of cloud-based email providers such as Gmail, Outlook.com, Yahoo!, etc.; so it&rsquo;s very easy to have FME Server scan a Gmail account (for example) for incoming mail, and then act on its contents. FME Server has the option to load templates for these popular email providers.</p>
</blockquote>
</div>
</div>
</div>
</div>
</div>
</div>