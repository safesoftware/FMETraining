<h2 id="learning-objectives">Learning Objectives</h2>
<p>After completing this lesson, you&rsquo;ll be able to:</p>
<ul>
<li>Understand the difference between the Merge Attributes and Generate List... options in Overlayer transformers.</li>
<li>Create a list attribute using an Overlayer transformer.</li>
<li>View a list attribute in the Feature Information Window.</li>
</ul>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/AdvancedDataTransformation/create-lists-using-transformers.fmw" target="_blank" rel="noopener">Starting workspace</a>
<ul>
<li>For Safe Software-hosted training courses, you can find this on your virtual machine here: C:\FMEData\Workspaces\AdvancedDataTransformation\create-lists-using-transformers.fmw</li>
</ul>
</li>
<li><a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/AdvancedDataTransformation/create-lists-using-transformers-complete.fmw" target="_blank" rel="noopener">Complete workspace</a>
<ul>
<li>C:\FMEData\Workspaces\AdvancedDataTransformation\create-lists-using-transformers-complete.fmw</li>
</ul>
</li>
<li><a href="https://s3.amazonaws.com/FMEData/FMEData/Resources/FormBasic/street-trees.csv" target="_blank" rel="noopener">street-trees.csv</a>
<ul>
<li>C:\FMEData\Resources\FormBasic\street-trees.csv</li>
</ul>
</li>
<li><a href="https://s3.amazonaws.com/FMEData/FMEData/Resources/FormBasic/parks-polygon-representation.geojson" target="_self">parks-polygon-representation.geojson</a> (Esri GDB)
<ul>
<li>C:\FMEData\Resources\FormBasic\parks-polygon-representation.geojson</li>
</ul>
</li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>Jennifer is ready to put her knowledge of lists into action!</p>
<p>She's been asked to find the most common genus of trees in Vancouver's parks.</p>
<p>She has point data of all the street trees in the city, as well as polygons of the parks. Now she needs to overlay these datasets (what you might know as a <a href="https://pro.arcgis.com/en/pro-app/latest/tool-reference/analysis/spatial-join.htm" target="_blank" rel="noopener">spatial join</a>) to add information about each tree to the park polygons.</p>
<p>Jennifer knows that many FME transformers have a <em>Generate List</em>&nbsp;checkbox under the&nbsp;<em>Attribute Accumulation</em> section of their parameters dialog. For example:</p>
<p><img class="image image-block image-center" src="images/1639088915106.png" alt="Generate List checkbox" /></p>
<p>For query transformers that can return multiple results, like the&nbsp;<a href="https://docs.safe.com/fme/html/FME-Form-Documentation/FME-Transformers/Transformers/pointonareaoverlayer.htm" target="_blank" rel="noopener">PointOnAreaOverlayer</a>, these parameters can be used to generate a list to store the results.</p>
<p>So, Jennifer plans to merge the tree points with the park polygons using the PointOnAreaOverlayer. However, copying attributes from each tree to their respective park polygons isn't enough; what if there is more than one tree per park?</p>
<p>List attributes are perfect for this scenario: if more than one tree falls within the same park polygon, she can use a list attribute to store information for <em>all</em> trees in each park. The PointOnAreaOverlayer allows her to generate a list that stores the values for all points overlaid on the area.</p>
<p>Her goal workspace will:</p>
<ul>
<li>Read point data with information about trees.</li>
<li>Read polygon data with information about Vancouver parks.</li>
<li>Overlay the points and polygons using the&nbsp;PointOnAreaOverlayer.</li>
<li>Use list attributes to store the values of all tree points within each park.</li>
</ul>
<h2 id="1-open-fme-workbench">1) Open FME Workbench and Run Workspace</h2>
<p>Jennifer opens the <a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/AdvancedDataTransformation/exercise-create-lists-using-transformers.fmwt" target="_blank" rel="noopener">starting workspace </a>(C:\FMEData\Workspaces\AdvancedDataTransformation\create-lists-using-transformers.fmw) in FME Workbench (2025.0.1 or later).</p>
<p>She runs the workspace to generate feature caches.</p>
<h2 id="2-run-the-workspace-and-inspect-the-data">2) Run the Workspace and Inspect the Data</h2>
<p>She inspects the Trees and parks-polygon-representation caches by clicking each cache while holding down the Ctrl or Cmd key:</p>
<p><img src="images/1746637043295.png" alt="Viewing both caches" /></p>
<p>First, she'd like to visually understand the degree of overlap between the datasets so she can spot-check the list results. She decides to inspect her local park, China Creek North Park.</p>
<p>With the two datasets in Visual Preview, she does the following.</p>
<p>First, she searches for "China Creek North" using the Filter field at the bottom of Table View with the parks-polygon-representation table displayed:</p>
<p><img src="images/1746637141777.png" alt="Searching for China Creek North park" /></p>
<p><span style="font-family: inherit; font-size: 1em;">Next, she navigates to the park by selecting the row in Table View and then using the Zoom to Selected Feature button in Graphics View:</span></p>
<p><span style="font-family: inherit; font-size: 1em;"><img src="images/1746637219222.png" alt="Zooming to China Creek North" /></span></p>
<p><span style="font-family: inherit; font-size: 1em;">Finally, she visually confirms that there are over a dozen trees (the points) within China Creek North Park:</span></p>
<p><img src="images/1746637287756.png" alt="Trees in park" /></p>
<p>How can she get a list of all trees in each park?</p>
<h2 id="3-set-point-on-area-overlayer-parameters-merge-attributes">3) Set PointOnAreaOverlayer Parameters: Merge Attributes</h2>
<p>She double-clicks the PointOnAreaOverlayer to open its parameters. By default, the checkboxes under <em>Attribute Accumulation&nbsp;</em>are unchecked, which means the area and point attributes are not being merged, and no list attributes are being created.</p>
<p>She checks Merge Attributes<em>,&nbsp;</em>leaving the other parameters disabled for now:</p>
<p><img class="image image-block image-center" src="images/1746637667426.png" alt="Merge Attributes, don't generate lists" width="349" height="512" /></p>
<p>She clicks OK to close the parameters.</p>
<h2 id="4-run-the-workspace">4) Run the Workspace</h2>
<p>She reruns the workspace and inspects China Creek North Park again using the procedure from step #2.</p>
<p>The PointOnAreaOverlayer added an <code>_overlaps</code> attribute that counts the number of points in each area. In the Feature Information window, we can see that China Creek North Park has 43 overlaps, i.e., trees, but the polygon only has attributes from one of the trees, a Norway Maple:</p>
<p><img class="image image-block image-center" src="images/1746638400643.png" alt="Attributes from one tree species" width="882" height="587" /></p>
<p>This is the result of merging the incoming features. The Merge Attributes option can only add attributes from one feature. Because Jennifer wants attributes from multiple features, she must use a list attribute.</p>
<h2 id="5-set-point-on-area-overlayer-parameters-generate-list">5) Set PointOnAreaOverlayer Parameters: Generate List</h2>
<p>She opens the PointOnAreaOverlayer parameters and unchecks <em>Merge Attributes</em>. Instead, she checks<em>&nbsp;Generate List on Output &lsquo;Area&rsquo;</em>. She names the list <code>_trees</code> and uses&nbsp;<em>Selected Attributes&nbsp;</em>to select the attributes <code>COMMON_NAME</code>, <code>DIAMETER</code>, <code>HEIGHT</code>, <code>SPECIES_NAME</code>, and <code>TREE_ID</code>:</p>
<p><img class="image image-block image-center" src="images/1746639114971.png" alt="Don't Merge Attributes, Generate List on Area" width="546" height="512" /></p>
<p>She clicks OK to close the parameters.</p>
<h2 id="6-run-the-workspace">6) Run the Workspace</h2>
<p>She runs the workspace and inspects China Creek North Park again. The Feature Information window shows a list attribute, <code>_trees{}</code>, which contains information from all tree points in the park. She clicks an individual element, _trees{0}, to expand it and view its attribute-value pairs:</p>
<p><img src="images/1746639581927.png" alt="Viewing individual trees in the park list" /></p>
<p>She successfully used the PointOnAreaOverlayer to create a list called <code>_trees{}</code>, which stores the values of multiple tree points within each park polygon. She notes how each numbered list element contains the same attributes: <code>COMMON_NAME</code>, <code>DIAMETER</code>, etc.</p>
<p>Now that Jennifer has lists of all the park trees, she can use list transformers to find the most common genus, which she'll do in the next lesson.</p>