<h2 id="learning-objectives">
  <span>Learning Objectives</span>
</h2>
<p>After completing this lesson, you’ll be able to:</p>
<ul>
  <li>Explain custom transformer versions.</li>
  <li>Create a new custom transformer version.</li>
  <li>Edit a specific custom transformer version.</li>
  <li>Explain the relationship between custom transformer versions and FME versions.</li>
  <li>Update a custom transformer version.</li>
</ul>
<h2 id="custom-transformer-versioning">
  <span>Custom Transformer Versioning</span>
</h2>
<p>FME allows tracking versions for external file definitions of custom transformers (linked transformers). Each time a user edits a custom transformer definition, they can save a new version.</p>
<p>In that way, a single FMX file can contain multiple versions of the same custom transformer.</p>
<p>Versioning allows the author of a custom transformer to revert to a previous definition, should the need arise. It also allows users to create a different definition for each version of FME. The custom transformer remains backward-compatible with older FME versions but has enhanced functionality in newer versions.</p>
<h2 id="creating-a-versioned-custom-transformer">
  <span>Creating a Versioned Custom Transformer</span>
</h2>
<p>After editing an <em>unversioned</em> custom transformer, clicking the save button issues the following prompt:</p>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced5CustomTransformers/Images/Img5.041.CreateNewCTVersion.png" alt="Save Transformer prompt" class="image image-block image-center" /></p>
<p>The two versioning options are to <strong>Overwrite</strong> the existing version or create a <strong>New Version</strong>.</p>
<p>Essentially, the prompt asks whether to activate versioning. Clicking New Version versions the transformer and saves the edits as version 2. Note that creating a new version does not create a separate FMX file; instead, it creates a different version of the transformer within the same FMX file.</p>
<p>The title bar in Workbench illustrates the version number of a custom transformer file:</p>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced5CustomTransformers/Images/Img5.042.NewCTVersionWBHeader.png" alt="Checking the version in the Workbench window title" class="image image-block image-center" /></p>
<p>The transformer remains unversioned if you choose Overwrite in the Save Transformer dialog.</p>
<h2 id="editing-a-specific-transformer-version">
  <span>Editing a Specific Transformer Version</span>
</h2>
<p>Opening a <em>versioned</em> custom transformer in Workbench issues the following prompt:</p>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced5CustomTransformers/Images/Img5.043.CTEditingVersionChoice.png" alt="Select Transformer Version prompt" class="image image-block image-center" /></p>
<p>This prompt asks which version you wish to edit or whether you want to start with a new version. You can:</p>
<ul>
  <li>Create a new version to edit</li>
  <li>Continue making edits to the existing version</li>
  <li>Make edits to an older version (particularly useful when you can only use that version with an older FME release)</li>
</ul>
<p>It’s essential to be aware that this dialog is the only way to create a new version. Clicking the save button only saves updates to the currently open version. To create a new version, you need to close and reopen the file, causing the Select Transformer Version dialog to appear.</p>
<h2 id="transformer-and-fme-versions">
  <span>Transformer and FME Versions</span>
</h2>
<p>Each version of a custom transformer is associated with a particular FME version. You can choose to make edits to a transformer created in an older version of FME, but you will receive a warning message:</p>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced5CustomTransformers/Images/Img5.044.CTEditingVersionInNewerBuild.png" alt="Transformer From Older FME warning" class="image image-block image-center" /></p>
<p>Here a user created version 1 with FME 2020, and the author is attempting to edit it in FME 2022. Should they go ahead and do so, version 1 of the transformer will no longer be valid for use in FME 2020.</p>
<div class="box message info">
  <div class="inner">
    <div class="bd">
      <div class="media">
        <img class="img mtm" role="presentation" src="https://safemytrailhead.s3.us-west-2.amazonaws.com/images/safe_note.png" alt="Note" />
        <div class="mediaBd">
          <div class="message-media-content">
            <div>Sometimes you can get confused about these dialogs (well, I can), so let me set you straight:<br /><br />When you first export a custom transformer, you don’t get the Select Version dialog (because the transformer is still unversioned). You also don’t get the Save Version dialog (because why create a new version when you just exported this transformer?)<br /><br />When you open the definition (FMX file) the next time, you again don’t get the Select Version dialog (because it is still unversioned). But you will get the Save Version dialog when you save the changes, allowing you to make the transformer versioned.</div>
            <div><br /></div>
            <div>From that point on, you’ll always get the Select Version dialog when you open the FMX file (because the transformer is now versioned), but for the same reason, you’ll never get the Save Version dialog when you save edits.</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="updating-a-transformer-version">
  <span>Updating a Transformer Version</span>
</h2>
<p>If you turn on the option to display the transformer version (Tools &gt; FME Options &gt; Transformers &gt; Display transformer version), then each linked custom transformer displays its version number in the summary annotation:</p>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced5CustomTransformers/Images/Img5.045.CTVersionSummaryAnnotation.png" alt="Viewing transformer version in Attached Annotation" class="image image-block image-center" /></p>
<p>When FME detects that a new version is available (i.e., the author has made edits and saved them as a new version) and that this version is compatible with the current FME version, then an option appears on the context menu to allow an update:</p>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced5CustomTransformers/Images/Img5.046.CTNewVersionAvailable.png" alt="Upgrading a custom transformer to the latest version" class="image image-block image-center" /></p>
<p>Choosing to upgrade means the transformer becomes linked to the latest version, and the summary annotation updates to reflect the change.</p>
<p>You can also upgrade eligible custom transformers in the same method you upgrade FME transformers when moving to a new FME version: in the Navigator. Custom transformers will appear under Upgradable Transformers, just like regular transformers. <a href="https://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Workbench/Workbench/Working_With_Transformer_Versions.htm" rel="noreferrer noopener" target="_blank">Learn more about upgrading FME transformers</a>.</p>
<p><img src="images/1643912593333.png" alt="Upgrading a custom transformer via the Navigator" class="image image-block image-center" /></p>