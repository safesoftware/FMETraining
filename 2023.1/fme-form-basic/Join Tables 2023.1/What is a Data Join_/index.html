<h2 id="learning-objectives">Learning Objectives</h2>
<p>After completing this lesson, you&rsquo;ll be able to:</p>
<ul>
<li>Understand the difference between appending and joining features in FME.</li>
<li>Explain the distinction between joins based on attribute values and spatial relationships.</li>
</ul>
<h2 id="video">Video</h2>
<p><iframe class="image-center" title="Video Content" src="https://play.vidyard.com/6qqHTrPWi7EDJGmbY53GRY" width="640" height="360" allowfullscreen=""></iframe></p>
<blockquote>
<p><img class="img mtm" role="presentation" src="images/safe_note.png" alt="Note" /></p>
<p><span style="font-family: inherit; font-size: 1em;">Videos are provided in this course if you prefer to watch instead of reading the text below. Note that some Quiz answers might require you to read the text.</span></p>
</blockquote>
<h2 id="what-is-a-data-join">What is a Data Join?</h2>
<p>Whereas filter transformers divide data into different streams, other transformers combine data streams, merging the data according to user-defined conditions. Here (for example), incoming streams A and B are joined together with a FeatureJoiner into a new stream, C:</p>
<p><img src="images/1700606079170.png" alt="A and B joined to create C" /></p>
<p>&nbsp;</p>
<h2 id="appending-versus-joining">Appending Versus Joining</h2>
<p>FME allows users to append or merge (or join) their data to combine multiple data streams. The two techniques, although seemingly similar, yield different results. When datasets are appended, additional <strong>rows&nbsp;</strong>(in FME, features)<strong>&nbsp;</strong>are added to the attribute table. However, additional columns (in FME, attributes) are added when datasets are merged or joined.</p>
<p><strong>Append</strong></p>
<p>Datasets are typically appended when there is no change to the table schema or data model. Appending can use the same schema since the values of one dataset are added after the existing values of another.</p>
<p>If the table schemas are different, the output will contain missing values for the columns not contained in both datasets.</p>
<p><img class="image image-block image-center" src="images/append.png" alt="Diagram of appending data" /></p>
<p>Appends should be used when additional rows or records are added to the dataset. Appends are performed by combining multiple feature connection lines into a single input port on a transformer or writer feature type.</p>
<p><img class="image image-block image-center" src="images/connect.png" alt="Appending data in FME" /></p>
<p><em>This e</em><em>xample workspace appends records from both tables into a single table.</em></p>
<p><strong>Joining or Merging</strong></p>
<p>Datasets should be combined by merging when additional attributes must be added to the table schema or data model.</p>
<p>Merging requires a common attribute to join on, ensuring that the new attributes are correctly matched within the output. There can be missing values within either dataset, provided the attribute being merged upon does not contain missing values.</p>
<p><img class="image image-block image-center" src="images/merge.png" alt="Diagram of merging data" /></p>
<p>Datasets can be merged using a variety of transformers, including the&nbsp;<a href="https://docs.safe.com/fme/html/FME-Form-Documentation/FME-Transformers/Transformers/featuremerger.htm" target="_blank" rel="noopener">FeatureMerger</a>&nbsp;(depicted below) and the&nbsp;<a href="https://docs.safe.com/fme/html/FME-Form-Documentation/FME-Transformers/Transformers/databasejoiner.htm" target="_blank" rel="noopener">DatabaseJoiner</a>. To join datasets using their spatial location, use the&nbsp;<a href="https://docs.safe.com/fme/html/FME-Form-Documentation/FME-Transformers/Transformers/spatialfilter.htm" target="_blank" rel="noopener">SpatialFilter</a>&nbsp;or&nbsp;<a href="https://docs.safe.com/fme/html/FME-Form-Documentation/FME-Transformers/Transformers/spatialrelator.htm" target="_blank" rel="noopener">SpatialRelator</a>.</p>
<p><img class="image image-block image-center" src="images/trees.png" alt="Diagram of merging data in FME" /></p>
<p><em>This example workspace merges the attributes from both tables into one table.</em></p>
<h2 id="attribute-values-versus-spatial-relationships">Attribute Values Versus Spatial Relationships</h2>
<p>To merge data, it is necessary to define a relationship for the basis of the join, and this is done with one of several transformers.</p>
<p>These transformers allow you to merge data being processed by the workspace and provide the ability to form a join against a database or other external dataset.</p>
<p>Joins in FME can either be based on matching attribute values (DatabaseJoiner or FeatureMerger/FeatureJoiner), or they can be based on a spatial relationship such as an overlap between features or proximity from one feature to another (NeighborFinder or SpatialRelator).</p>
<blockquote>
<p><img class="img mtm" role="presentation" src="images/safe_note.png" alt="Note" /></p>
<p><span style="font-family: inherit; font-size: 1em;">This course covers joining data based on shared attribute values. <a href="https://community.safe.com/s/article/performing-spatial-joins-and-merges" target="_blank" rel="noopener">Check out this article</a> to learn more about joining data based on spatial relationships</span><span style="font-family: inherit; font-size: 1em;">.</span></p>
</blockquote>