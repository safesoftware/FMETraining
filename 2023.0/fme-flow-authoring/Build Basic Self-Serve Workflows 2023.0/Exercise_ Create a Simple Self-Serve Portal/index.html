<h2 id="learning-objectives">Learning Objectives</h2>
<p>After completing this lesson, you&rsquo;ll be able to:</p>
<ul>
<li>Register a Workspace with the Data Download service and run it.</li>
<li>Register a Workspace with the Data Streaming service and run it.</li>
</ul>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/exercise-create-a-simple-self-serve-portal.fmw" target="_blank" rel="noreferrer noopener">Starting workspace</a> | C:\FMEData\Workspaces\CreateDataIntegrationApps\exercise-create-a-simple-self-serve-portal.fmw</li>
</ul>
<h2>Video</h2>
<!-- The script tag should live in the head of your page if at all possible -->
<p>
<script type="text/javascript" src="https://play.vidyard.com/embed/v4.js"></script>
</p>
<!-- Put this wherever you would like your player to appear -->
<p><img class="vidyard-player-embed" style="width: 100%; margin: auto; display: block;" src="images/bWtCWTj2fsHW3xrrJLvoTM.jpg" data-uuid="bWtCWTj2fsHW3xrrJLvoTM" data-v="4" data-type="inline" /></p>
<h2 id="introduction">Introduction</h2>
<p>As a technical analyst in the GIS department of your local city, you have plenty of experience using FME Form and are just getting started with FME Flow.</p>
<p>Other departments frequently ask the GIS team for orthophoto imagery of the city. Their format of choice is usually JPEG. Currently, you use an&nbsp; FME Form workspace to translate the data, adding to your workspace any special requests they have such as a particular resolution, a specific area of interest, or even sets of vector data stamped onto the raster.</p>
<p>However good you are with FME Workbench, it does take time to set up each of these individual requests. It would be far better if the other departments could help themselves to the raster data, with options for all of their special requests built-in.</p>
<p>You realize that a Data Download system implemented on FME Flow would be an ideal solution. In this exercise, you will take an existing workspace and publish it for simple self-serve.</p>
<h2 id="1-open-and-examine-workspace">1) Open and examine workspace</h2>
<p>Open the starting workspace using FME Workbench (2023.0 or later). If you examine the reader, transformers, and writers, you will see that this workspace:</p>
<ol>
<li>Reads GeoTIFF orthophotos showing the City of Vancouver.</li>
<li>Resamples the photos to a grid spacing of five.</li>
<li>Creates a raster mosaic, turning multiple input rasters into a single raster layer.</li>
<li>Writes this raster mosaic to JPEG.</li>
</ol>
<p>If this workspace is published to FME Flow as is, users will be able to select the GeoTIFF files they wish to convert to JPEG and receive the results in a zipped folder.</p>
<div class="box message info">
<div class="inner">
<div class="bd">
<div class="media">
<blockquote><img class="img mtm" role="presentation" src="images/safe_note.png" alt="Note" /><br /><span style="font-family: inherit; font-size: 1em;">In the&nbsp;</span><strong>Build Versatile Self-Serve Workflows</strong><span style="font-family: inherit; font-size: 1em;">&nbsp;course, you can learn how to give the user control over additional parameters, including the size of the resampling and the input and output formats.</span></blockquote>
</div>
</div>
</div>
</div>
<h2 id="2-save-and-run-the-workspace">2) Save and run the workspace</h2>
<p>It is usually a good idea to save and run a workspace locally before publishing to FME Flow. Running now will help you identify any errors.</p>
<p>Click the Save button. Save the workspace wherever you wish. Then click the Run button. When the translation is finished with no errors, click the Open Containing Folder button on your writer feature type. The written data should be a JPEG file (06_07_LM.jpg) along with a world file (06_07_LM.wld).</p>
<p><img class="image image-block image-center" src="https://lh6.googleusercontent.com/DdK1HMcPP5ouwfcr0CE_eIKPTMQm9-sFxpX-SPi1q36bIiFlfVxWRYisQJ65594HcqTNheHX-guZWQrhUumlS8jsrZkxbNU4ET7JRG5Bm02sQoytjqtmGj4owPgbsD0hst3Y5KDM9RpsZ8xW" alt="JPEGs" width="850" height="131" /></p>
<div class="box message info">
<div class="inner">
<div class="bd">
<div class="media">
<blockquote><img class="img mtm" role="presentation" src="images/safe_note.png" alt="Note" /><br /><span style="font-family: inherit; font-size: 1em;">If you encounter an error or are not familiar with saving and running workspaces, you should take the&nbsp;</span><strong>Integrate Data with the FME Platform</strong> Learning Path<span style="font-family: inherit; font-size: 1em;">&nbsp;before proceeding.</span></blockquote>
</div>
</div>
</div>
</div>
<h2 id="3-publish-workspace-with-the-data-download-service">3) Publish workspace with the Data Download service</h2>
<p>Now publish the workspace to FME Flow. Register it with the Data Download service.&nbsp;</p>
<div class="box message info">
<div class="inner">
<div class="bd">
<div class="media">
<blockquote><img class="img mtm" role="presentation" src="images/safe_note.png" alt="Note" /><br /><span style="font-family: inherit; font-size: 1em;">Remember: if you are reading a file or folder, you usually need to either publish the data with the workspace or upload it to an FME Flow Resources folder. In the case of this workspace, it is reading the data from a URL, so uploading the data to FME Flow is not required. Feel free to practice uploading it anyway.</span></blockquote>
<div class="mediaBd">
<div class="message-media-content">
<p>Publishing and basic FME Flow data management are covered in the <strong>Publish Workflows to the Web</strong> Learning Path.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<h2 id="4-run-workspace-on-fme-server-using-the-data-download-service">4) Run workspace on FME Flow using the Data Download service</h2>
<p>Log in to the FME Flow web interface, locate the workspace, and run it.</p>
<p>The workspace will run and you will be presented with a hyperlink to a ZIP file of the output dataset:</p>
<p><img class="image image-block image-center" src="https://lh4.googleusercontent.com/8E0sycnI70RZzDCoL-q4JI12ElmpUgOFr7_quyvf-GtmTFRWagc8ny8DPd9cwYZRH4a7eX0SA2f7kfEtXVolzlAQWMbZdwrMVtldHIjPjML3gWzf_CFZl9lKkZQXAXxi6Mn2VCI-qDKEQQLm" alt="Link to zip output" width="799" height="180" /></p>
<p>Click the link to download the ZIP file. You should find it contains the same files (06_07_LM.jpg and 06_07_LM.wld) as when you ran the workspace locally.</p>
<div class="box message info">
<div class="inner">
<div class="bd">
<div class="media">
<blockquote><img class="img mtm" role="presentation" src="images/safe_note.png" alt="Note" /><br /><span style="font-family: inherit; font-size: 1em;">The ZIP file will place the JPG within a few nested folders. As covered in the previous lesson, you can adjust this structure during the Register Services step of publishing by clicking the Edit button.</span></blockquote>
</div>
</div>
</div>
</div>
<h2 id="5-publish-workspace-with-the-data-streaming-service">5) Publish workspace with the Data Streaming service</h2>
<p>Sometimes the end-users download data as JPEG just to open it in a browser or image viewer to inspect it. You realize that, in cases like this, they may be able to use a data streaming service, instead of a data download.</p>
<p>Let's try publishing the workspace under the Data Streaming service. When we use this service, the JPEG result of the translations should stream back to the user. Depending on their operating system and browser configuration, it will either download directly as a file or be displayed in the browser.</p>
<p>Publish the workspace to FME Flow.</p>
<p>In the final dialog of the publishing wizard, check the boxes to register the workspace with both Data Download and Data Streaming (but don't click Finish yet):</p>
<p><a href="https://s3.amazonaws.com/gitbook/Server-Authoring-2020/ServerAuthoring3SelfServe/Images/Img3.205.Ex2.PublishToStreamService.png" target="_blank" rel="noreferrer noopener"><img class="image image-block image-center" src="images/Img3.205.Ex2.PublishToStreamService.png" alt="Select Data Streaming service" /></a></p>
<p>Click the Edit button for the Data Streaming service. Ensure that the service is using the output of the JPEG Writer (for now we're limiting the streaming of data to JPEG format):</p>
<p><a href="https://s3.amazonaws.com/gitbook/Server-Authoring-2020/ServerAuthoring3SelfServe/Images/Img3.206.Ex2.StreamingParameters.png" target="_blank" rel="noreferrer noopener"><img class="image image-block image-center" src="https://lh5.googleusercontent.com/Nde3sKp36XcOW_ntQF_1Mfe8TNztsycSx1z2iGnPUhYSRpoDx6k2wC4JTYiePvoaTkx6fxrqIMzG_BnClLJvIUsTLmUM-lyZQsolmhV4Z6m8XMikz1zxH2BcY-WQ-BF9n2NsKcfyQWsEQTfC" alt="Checking Data Streaming properties" width="556" height="186" /></a></p>
<h2 id="6-run-workspace-on-fme-server-using-the-data-streaming-service">6) Run workspace on FME Flow using the Data Streaming service</h2>
<p>In the FME Server web interface, locate the newly published workspace and run it. In the parameters for the workspace, be sure to set the web service to Data Streaming instead of Data Download:</p>
<p><img class="image image-block image-center" src="https://lh3.googleusercontent.com/7HOQxURDBS6w8BYOkbKiQhrYylYCmQJk0EvtKJrOZMNeJm0LvpyAoAOcEC8gP7HBgIPpxQis4JHlxCqEzUhc44V0_F_vhKcsI94O0wzOVA4L3bQ310XAe5WuF8Mwt2WYnjEikeu_-Gr_QPw2" alt="Selecting Data Streaming service" width="712" height="230" /></p>
<h2 id="7-check-results">7) Check Results</h2>
<p>You should find that the results of the translation are returned as a streamed JPEG file. Most likely it will open directly in your web browser:</p>
<p><a href="https://s3.amazonaws.com/gitbook/Server-Authoring-2020/ServerAuthoring3SelfServe/Images/Img3.210.Ex2.JPEGOpenedInBrowser.png" target="_blank" rel="noreferrer noopener"><img class="image image-block image-center" src="images/Img3.210.Ex2.JPEGOpenedInBrowser.png" alt="Viewing the results in a browser" /></a></p>