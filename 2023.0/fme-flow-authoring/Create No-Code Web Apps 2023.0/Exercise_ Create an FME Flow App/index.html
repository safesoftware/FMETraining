<h2 id="learning-objectives">Learning Objectives</h2>
<p>After completing this lesson, you&rsquo;ll be able to:</p>
<ul>
<li>Create an FME Flow App.</li>
<li>Run an FME Flow App.</li>
</ul>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/earthquakesextrusion.fmw" target="_blank" rel="noreferrer noopener">earthquakesextrusion.fmw</a> | C:\FMEData\Workspaces\CreateDataIntegrationApps\earthquakesextrusion.fmw</li>
<li><a href="https://s3.amazonaws.com/FMEData/FMEData/Resources/CreateDataIntegrationApps/example.geojson" target="_blank" rel="noreferrer noopener">example.geojson</a> (a GeoJSON file of earthquake locations. This file can be used in the unlikely event the USGS Earthquake API goes down) | C:\FMEData\Resources\CreateDataIntegrationApps\example.geojson</li>
<li>You will need Google Earth Pro installed to view the results of the Flow App. You can download it for free <a href="https://www.google.com/earth/versions/#download-pro" target="_blank" rel="noreferrer noopener">here</a>.
<ul>
<li>If you are taking an official Safe Software training course, it is already installed on your training machine.</li>
</ul>
</li>
<li><a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/exercise-create-an-fme-flow-app-complete.fsproject" target="_blank" rel="noopener">Complete FME Flow project</a> | C:\FMEData\Workspaces\CreateDataIntegrationApps\exercise-create-an-fme-flow-app-complete.fsproject</li>
</ul>
<h2>Video</h2>
<!-- The script tag should live in the head of your page if at all possible -->
<p>
<script type="text/javascript" src="https://play.vidyard.com/embed/v4.js"></script>
</p>
<!-- Put this wherever you would like your player to appear -->
<p><img class="vidyard-player-embed" style="width: 100%; margin: auto; display: block;" src="images/bWtCWTj2fsHW3xrrJLvoTM.jpg" data-uuid="bWtCWTj2fsHW3xrrJLvoTM" data-v="4" data-type="inline" /></p>
<h2 id="introduction">Introduction</h2>
<p>You have successfully published a workspace to FME Flow that creates a 3D visualization of recent earthquakes around the world in KML format, using <a href="https://www.usgs.gov/natural-hazards/earthquake-hazards/earthquakes" target="_blank" rel="noreferrer noopener">data from the United States Geological Survey</a>. Now you are getting requests from other users who do not have FME Flow accounts but want to be able to run the workspace on demand.</p>
<p>Let's create an FME Flow App so that anyone with the URL can run this workspace to get an up-to-date KML whenever they wish.</p>
<h2 id="1-connect-to-server">1) Connect to Flow</h2>
<p>Browse to the login page of the FME Flow interface, and log in using the administrator account (admin/FMElearnings).</p>
<h2 id="2-open-server-apps">2) Open Flow Apps</h2>
<p>Expand Flow Apps from the side menu, then click Create Workspace App, to create a new Workspace App.</p>
<p><img class="image image-block image-center" src="https://lh5.googleusercontent.com/Z4FzbMfry37B51lDzt1RcOqbCGOIyhwLK0MVBWrLwgZbqp0f4tbqDaO8WCgHUDi27Bpk7ezaYv0EkSrw_5WfxQpdP5EencS9dEojwXn7LTZ9XbNA0ke4gvpomKwiQzJe1ZAredgxuzshBaonURty89Y" alt="Build Workspace App menu option" width="238" height="234" /></p>
<h2 id="3-configure-server-app">3) Configure Flow App</h2>
<p>Set a Name, Title, and Description for your new Flow App. The Name is what is displayed in the list of Workspace Apps and the Title and Description is what will be displayed on the actual App. Select the Samples Repository and the earthquakesextrusion.fmw workspace. Select &lsquo;Data Streaming&rsquo; as the Service. &nbsp;This will allow the information to be streamed back to the user directly within the browser (if supported).</p>
<div class="box message info">
<div class="inner">
<div class="bd">
<div class="media">
<blockquote><img class="img mtm" role="presentation" src="images/safe_note.png" alt="Note" /><br /><br /><span style="font-family: inherit; font-size: 1em;">If for some reason your FME Flow is missing this default included workspace, you can download it </span><a style="font-family: inherit; font-size: 1em; background-color: #ffffff;" href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/earthquakesextrusion.fmw" target="_blank" rel="noreferrer noopener">here</a><strong style="font-family: inherit; font-size: 1em;">&nbsp;</strong><span style="font-family: inherit; font-size: 1em;">and then publish it.</span></blockquote>
</div>
</div>
</div>
</div>
<p>You can leave the expiration time at its default value, which will allow the API Token to expire after 10 years. You could set this to a shorter time if you only want to grant access for a smaller time window.</p>
<p>Keep the Require Authentication toggle disabled. This setting will allow anyone with the URL to run the workspace.</p>
<p>Keep the Users Can Upload toggle enabled. This setting will allow users to upload their own GeoJSON input file instead of using the USGS data.</p>
<p><img class="image image-block image-center" src="https://lh3.googleusercontent.com/2SUyBqjoZAijRWL-XVBg_qmeF9VWyb05qR-_hpVHScn9brpbac9KI9U_i8WOus3Ip86qSmHjImzYq9TuvbAnJ-4SuxyHt34zZQSJouQ7NudyXGVcOlR3rcXRsMqialsVwFSsX56OwgB3qDoK83ncQsA" alt="Create Workspace App filled out" width="612" height="609" /></p>
<h2 id="4-check-the-parameters-section">4) Check the Parameters Section</h2>
<p>There are two collapsed sections below the first: Parameters and Customize. Click the Parameters section to expand it. You will see the workspace's user parameters, similar to how they appear on the Run Workspace page on FME Flow. You can see the source dataset is set to a URL (<a href="http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojson" target="_blank" rel="noreferrer noopener">http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojson</a>), pulling the recent earthquake data directly from the USGS web service.</p>
<p><img class="image image-block image-center" src="https://lh5.googleusercontent.com/hTz-UyYZjGZBpQfb_gYLnPl7yIKn8k2w2T_Og_ruPdnObMXIkiG_oUraWgHoiJscccTpU7jqbJQtbOBzZ1HJgN4YEQykl06r6PPnWm-JekIL4Vdo28LVHoTZmybiSmoTDukv1PbKQnr-SU0y4dpZoGc" alt="Expanded Parameters section" width="612" height="278" /></p>
<p>We don't want to modify how this works.</p>
<p>The Customize section lets you change the appearance of your Flow App, but you will learn more about that in the next lesson.</p>
<p>Click OK to accept.</p>
<h2 id="4-test-the-fme-server-app">5) Test the FME Flow App</h2>
<p>Now that your App has been created, you'll see that a URL was generated for it.</p>
<p><img class="image image-block image-center" src="https://lh5.googleusercontent.com/zFpLL2oL2yJ41uJxKqgSp0E9c7RvT2kP7bjnjT9q3mR2qj3uoJ_9cG8nkKgBjNgrMLBVfKBrxXtEion4MD5yiLEdktZyvh9rssUe-Mw70DWDIpVuMMcshWM2PeQOF-HJWkFEcj8Csyaq6CEQjRQOpXU" alt="Workspace App created page" width="612" height="458" /></p>
<p>Click on the URL to open it. You will see that it opens a webpage very similar to the Run Workspace page in FME Flow, but it has no options other than to run this one workspace and it does not require a user to enter a username and password to access it.</p>
<p><img class="image image-block image-center" src="https://lh3.googleusercontent.com/OojIzaNxDTluhH3TvTcDdRR2s9HTC_cN1XaICGqBqmgCmC0aN4ykjb_acgm1f0LxhS7vcX2JAwOol8qw5qbbEXeU-RhX6hM3VT6iF51dLAuB4GzlAyONhA3uyHxjIG01rFDJ2nUR6VDYQzJt8sEUNps" alt="Recent Earthquake Visualization Server App" width="612" height="566" /></p>
<div class="box message info">
<div class="inner">
<div class="bd">
<div class="media">
<blockquote><img class="img mtm" role="presentation" src="images/safe_note.png" alt="Note" /><br /><br /><span style="font-family: inherit; font-size: 1em;">If the workspace failed, you should ensure that the source data is available. Check the FME Flow logs for more clues. If for some reason the USGS source data is not available, you can use this </span><a style="font-family: inherit; font-size: 1em; background-color: #ffffff;" href="https://s3.amazonaws.com/FMEData/FMEData/Resources/CreateDataIntegrationApps/example.geojson" target="_blank" rel="noreferrer noopener">example.geojson</a><span style="font-family: inherit; font-size: 1em;">&nbsp;file instead.</span></blockquote>
</div>
</div>
</div>
</div>
<h2 id="advanced-exercise-optional">Advanced Exercise (Optional)</h2>
<p>We've been requested to create a webhook to share our workspace with customers in an email.</p>
<p>From the Run Workspace page, ensure that the Workspace is set to earthquakesextrusion.fmw, then from the Workspace Actions drop-down select Create Webhook</p>
<p><img class="image image-block image-center" src="https://lh3.googleusercontent.com/BuYE8KhNBh8YAxoMrPGncRn0Qh-U-VgvElKA6aiFgYCdYmODcP9XXRClGXmlPBjpKNEKbqaCxpeaN801UFV4LXOmXq2MhU5PWI9muSLBoyg0LzpGxpGH29seHVB2hay0217i3dQIJmzbz3kybpYO1FI" alt="Create Webhook menu option" width="267" height="262" /></p>
<p>On the Create Webhook page, we can just accept the defaults for the parameters. Optionally, you can add additional permissions for the user, such as access to the data folder. Click OK to create the Webhook.</p>
<p>Before closing the Webhook URL page, ensure that you download your Webhook token and parameters as this will be the only time you can do so. If you forget to download it or lose the file, you will have to recreate the Webhook.&nbsp;</p>