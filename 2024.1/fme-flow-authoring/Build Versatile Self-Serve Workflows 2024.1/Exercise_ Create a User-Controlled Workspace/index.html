<h2 id="learning-objectives">Learning Objectives</h2>
<p>After completing this lesson, you&rsquo;ll be able to:</p>
<ul>
<li>Give users options when using self-serve applications.</li>
<li>Configure a self-serve service with published parameters.</li>
</ul>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/exercise-create-a-user-controlled-workspace.fmw" target="_blank" rel="noreferrer noopener">Starting workspace</a> | C:\FMEData\Workspaces\CreateDataIntegrationApps\exercise-create-a-user-controlled-workspace.fmw</li>
<li><a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/exercise-create-a-user-controlled-workspace-complete.fmw" target="_blank" rel="noreferrer noopener">Complete workspace</a> | C:\FMEData\Workspaces\CreateDataIntegrationApps\exercise-create-a-user-controlled-workspace-complete.fmw</li>
</ul>
<!-- The script tag should live in the head of your page if at all possible -->
<p>
<script type="text/javascript" src="https://play.vidyard.com/embed/v4.js"></script>
</p>
<!-- Put this wherever you would like your player to appear -->
<h2 id="introduction">Introduction</h2>
<p>In this exercise, you will use user parameters to allow users to customize the output community mapping features using the Data Download service on FME Flow.</p>
<h2 id="1-open-fme-workbench">1) Open and Inspect the Starting Workspace</h2>
<p>Open the <a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/exercise-create-a-user-controlled-workspace.fmw" target="_blank" rel="noopener">starting workspace</a> in FME Workbench. The workspace reads in community features from the CommunityMap file geodatabase and then writes them out using a <a href="https://docs.safe.com/fme/html/FME-Form-Documentation/FME-ReadersWriters/generic/generic.htm" target="_blank" rel="noopener">Generic writer</a>, which allows writing to any FME-supported format.&nbsp;&nbsp;</p>
<p>In the Navigator window, expand the Output [GENERIC] writer Parameters and the User Parameters. A parameter has already been created that allows the user to select the writer format for the output data and it has been linked to the writer parameters.&nbsp;</p>
<p><img src="images/1734549293891.jpg" alt="" width="467" height="440" /></p>
<p>Right-click User Parameters and select Manage User Parameters. You should see the OUTPUT_FORMAT parameter and its configuration settings. Expand Choice Configuration to see the format options that are configured and then set the default value to Esri Shapefile.&nbsp;</p>
<p><img src="images/1734550060218.jpg" alt="" width="799" height="416" /></p>
<p>This is one of the options for where you can create and manage user parameters for your workspace.&nbsp;</p>
<p>Click OK to close the user parameters window.&nbsp;</p>
<h2 id="2-open-the-generic-writer-published-parameters">2) Add a User Parameter for Reader Feature Types</h2>
<p>Currently, our workspace allows the user to control which format the data is written out to. However, all of the CommunityMap feature datasets will be written so next we will add some user control over which datasets they want to be included in the output.&nbsp;</p>
<p>In the Navigator pane, expand the CommunityMap [FILEGDB] reader and further expand Parameters and Feature Types to Read sections.&nbsp;</p>
<p>Right-click on Feature Types to Read parameter and select Create User Parameter.&nbsp;</p>
<p><img src="images/1734550522925.jpg" alt="" width="527" height="416" /></p>
<p>This opens a window showing a list of Feature Types and the user parameter name, prompt, and default value. The default settings do not need changing, so click OK to close the window and create the user parameter.&nbsp;&nbsp;</p>
<p><img src="images/1734550875873.jpg" alt="" /></p>
<p>In the Navigator, you will see the Feature Types to Read writer parameter has been linked to the FEATURE_TYPES user parameter.&nbsp;</p>
<p><img src="images/1734551306093.jpg" alt="" width="506" height="602" /></p>
<div class="box message info">
<div class="inner">
<div class="bd">
<div class="media">
<blockquote><img class="img mtm" role="presentation" src="images/safe_note.png" alt="Note" /><br /><br />This user parameter could have been created in the Manage User Parameters window that we investigated the OUTPUT_FORMAT parameter in. However, this method automatically generated the list of available feature types to be selected from and linked the FEATURE_TYPES parameter to the Feature Types to Read writer parameter so this method was quicker for this scenario.&nbsp;</blockquote>
</div>
</div>
</div>
</div>
<p>Now you should have 2 user parameters, one allowing the user to control the output writer format and one to control which feature types to read and be included in the output.&nbsp;</p>
<h2 id="3-create-new-user-parameter">3) Run Workspace</h2>
<p>Ensure Prompt for Parameters in enabled and then click Run Workspace.&nbsp;</p>
<p><img src="images/1731951381472.png" alt="Prompt for Parameters and Run Workspace" /></p>
<p>This opens the prompt where you select the output format from the drop-down and the community map feature types to include.&nbsp;</p>
<p><img src="images/1734552829377.jpg" alt="" /></p>
<p>After you've made your selections, click Run. Only the feature type(s) you've selected will be read from the File Geodatabase and included in the output of your chosen format.&nbsp;</p>
<div class="box message info">
<div class="inner">
<div class="bd">
<div class="media">
<blockquote><img class="img mtm" role="presentation" src="images/safe_note.png" alt="Note" /><br /><br /><span style="font-family: inherit; font-size: 1em;">Use </span><strong style="font-family: inherit; font-size: 1em;">Run &gt; Rerun Entire Workspace&nbsp;</strong><span style="font-family: inherit; font-size: 1em;">after you change user parameters. FME will only prompt you to choose parameter values for parts of the workspace that run, so it's best to rerun the entire workspace to make sure you are prompted.</span></blockquote>
</div>
</div>
</div>
</div>
<h2 id="4-link-published-parameter-to-output-format-parameter">4) Publish to FME Flow</h2>
<p>Optionally, save the workspace and then either click Publish on the top toolbar or select File &gt; Publish to FME Flow.&nbsp;</p>
<p>Connect to your FME Flow and select the Training repository for the workspace. If the Training repository doesn't exist, click New to create it.&nbsp;</p>
<p><img src="images/1734553403586.jpg" alt="" width="522" height="562" /></p>
<p>Click Next.&nbsp;</p>
<p>Register the workspace with the Data Download and Job Submitter services. Then click Publish.&nbsp;</p>
<p><img src="images/1734553498112.jpg" alt="" width="485" height="497" /></p>
<h2 id="10-run-workspace">5) Run Workspace on FME Flow</h2>
<p>Navigate and log into your FME Flow. You can click the Direct Link to the workspace on FME Flow from the translation log in FME Workbench after publishing to open the workspace directly.&nbsp;</p>
<p>On the Run Workspace page, select the Training repository, the workspace we just published, and the Data Download service.&nbsp;</p>
<p><img src="images/1734553827397.jpg" alt="" width="1149" height="640" /></p>
<p>Under Published Parameters, you should see the user parameters we configured in FME Workbench. Select your desired output format from the drop-down options.&nbsp;</p>
<p><img src="images/1734554203411.jpg" alt="" width="675" height="205" /></p>
<p>Select one or multiple Feature Types to Read from the drop-down multi-select options.</p>
<p><img src="images/1734554255205.jpg" alt="" width="687" height="396" /></p>
<p>Once you have selected the parameters, click Run.</p>
<h2 id="11-view-the-results">11) View the Results</h2>
<p>The Data Download service presents a URL link to the translation results in a zip file. A quick inspection of the contents of the zip file confirms the results are what we expected.</p>
<p><img src="images/1734554350907.jpg" alt="" width="884" height="262" /></p>
<p><img src="images/1736280882550.jpg" alt="" width="689" height="440" /></p>
<p>Now you have successfully adapted a workspace to allow for user control of the community feature types and output format. This provides greater flexibility for accessing and receiving data for yourself and other users with access to the workspace on FME Flow.&nbsp;</p>