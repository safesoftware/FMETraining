<h2>Learning Objectives</h2>
<p>After completing this lesson, you'll be able to:</p>
<ul>
<li>Create a Webhook URL to run a workspace on FME Flow.</li>
<li>Run a Workspace App that provides a link to run the same workspace using a different service.&nbsp;</li>
</ul>
<h2>Resources</h2>
<ul>
<li><a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/create-data-integration-apps--starting-project.fsproject" target="_blank" rel="noopener">Starting FME Flow project</a> | C:\FMEData\Workspaces\CreateDataIntegrationApps\create-data-integration-apps--starting-project.fsproject</li>
<li><a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/FoodVendorBusinesses.fmw" target="_blank" rel="noopener">Starting workspace</a> | C:\FMEData\Workspaces\CreateDataIntegrationApps\FoodVendorBusinesses.fmw</li>
</ul>
<p>If you're taking a live Safe Software-hosted training course or using an on-demand lab for this course, we've already imported the content for this lesson into your FME Flow.<br />If you're completing this lesson with your own FME Flow, you must import the starting project with the content into your FME Flow.&nbsp;</p>
<!-- BEGIN: Reusable Custom Expandable Section -->
<div>
<style>
  .custom-details {
    background-color: #07D7FF; /* safe blue */
    color: #333;
    padding: 14px;
    margin-bottom: 10px;
    border-radius: 4px;
    cursor: pointer;
  }

  .custom-details summary {
    font-size: 18px;
    font-weight: bold;
    outline: none;
    user-select: none;
    padding: 5px 0;
  }

  .custom-details[open] {
    background-color: #d3d3d3; /* grey */
  }

  .custom-details div {
    padding-top: 10px;
    padding-bottom: 10px;
    padding-left: 12px;
    margin-top: 10px;
    font-size: 16px;
    line-height: 1.5;
  }
</style>
</div>
<details class="custom-details">
<summary>Expand for Steps to Import the Starting Project</summary>
<div>1) Download the <a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/create-data-integration-apps--starting-project.fsproject" target="_blank" rel="noopener">starting project</a> and the <a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/create_data_integration_apps.jceks" target="_blank" rel="noopener">encryption key</a>.</div>
<div>2) Upload the <a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/create_data_integration_apps.jceks" target="_blank" rel="noopener">create_data_integration_apps.jceks </a>encryption key to your FME Flow. An fmesuperuser who has permission to System Configuration &gt; Security &gt; System Encryption must perform this action. For more information, see our documentation on <a href="https://docs.safe.com/fme/html/FME-Flow/WebUI/Encryption.htm" target="_blank" rel="noopener">System Encryption</a>.</div>
<div>3) Navigate to your FME Flow and open Projects. Click Import.&nbsp;</div>
<div><img src="images/1748467877735.jpg" alt="" width="979" height="302" /></div>
<div>4) Upload <a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/create-data-integration-apps--starting-project.fsproject" target="_blank" rel="noopener">create-data-integration-apps--starting-project.fsproject </a>as the Project File and then click Import.&nbsp;</div>
<div><img src="images/1759853954840.jpg" alt="" /></div>
<div>5) The first step is Preview Content, where you may choose not to overwrite existing items. If all your items are New Items, you don't need to worry about overwriting existing items. Click Continue.</div>
<div><img src="images/1759854242215.jpg" alt="" /></div>
<div>6) The next step is to select connections and tokens to import. This project doesn't contain any connections, parameters, tokens, or users to import. Click Continue through Step 2 and Step 3. Click Import Project on Step 4. The project will import and display its import status from the same page.&nbsp;</div>
<div><img src="images/1748469576862.jpg" alt="" width="294" height="108" /></div>
<div>If the project import failed, check that you uploaded the encryption key and repeat the process. If the issue persists, please contact us at train@safe.com.&nbsp;</div>
</details>
<h2>Advanced Workspace Processing with Flow Apps</h2>
<p>Currently, FME Flow limits Workspace Apps to using only one workspace with one service at a time. In specific scenarios, you may want to run a Workspace App with multiple services, run multiple workspaces in sequence, or conditionally run other FME workflows depending on results from your app. FME Flow offers numerous features that enable you to link workspaces and apps together for seamless processing.&nbsp;</p>
<table style="border-collapse: collapse; width: 100%; height: 266.445px;" border="1">
<tbody>
<tr style="height: 32.5px;">
<td style="width: 16.433%; height: 32.5px;"><strong>Feature</strong></td>
<td style="width: 83.567%; height: 32.5px;"><strong>Common Functions</strong></td>
</tr>
<tr style="height: 136.445px;">
<td style="width: 16.433%; height: 136.445px;">
<p><a href="https://docs.safe.com/fme/html/FME-Flow/WebUI/Automation-Apps.htm?" target="_blank" rel="noopener">Automation Apps</a></p>
</td>
<td style="width: 83.567%; height: 136.445px;">
<p>Run multiple workspaces in sequence or in parallel.</p>
<p>Run workspaces conditionally based on results or data from previous workspaces or app inputs.</p>
<p>Trigger additional workflows with FME Flow System Events and Topics external actions.</p>
</td>
</tr>
<tr style="height: 32.5px;">
<td style="width: 16.433%; height: 32.5px;">
<p><a href="https://docs.safe.com/fme/html/FME-Flow/DevelopersGuide/REST-API-Method-Reference.htm" target="_blank" rel="noopener">FME Flow REST API</a></p>
</td>
<td style="width: 83.567%; height: 32.5px;">
<p>&nbsp;Make API calls to FME Flow to get data and information from FME Flow.</p>
<p>Trigger and run FME workflows from external applications or from workspaces.</p>
<p>Link within Workspace App workspaces to run other workflows or send data to FME Flow.</p>
</td>
</tr>
<tr style="height: 32.5px;">
<td style="width: 16.433%; height: 32.5px;"><br />
<p><a href="https://docs.safe.com/fme/html/FME-Flow/WebUI/Run-Workspace.htm?#RunWorkspace" target="_blank" rel="noopener">Webhook URLs</a></p>
</td>
<td style="width: 83.567%; height: 32.5px;">
<p>Run workspaces programatically from third-party applications, web browsers, or other workspaces.</p>
<p>Link from Workspace App results to run a second workspace with app user inputs, or with a different service than the app.</p>
</td>
</tr>
</tbody>
</table>
<p><span style="font-weight: 400;">In this lesson, we&rsquo;ll cover two common examples linking multiple workspaces and apps together using FME Flow's REST API and Webhook URLs. We previously covered Automation Apps in the previous course, and you can learn more about Automation Apps in <a href="https://academy.safe.com/path/automate-workflows-with-fme-flow/job-orchestration-in-automations" target="_blank" rel="noopener">Job Orchestration in Automations</a>.&nbsp;</span></p>
<h2>Triggering Workflows with the FME Flow REST API</h2>
<p>You can use the FME Flow REST API to run or enable additional workflows on FME Flow from within a workspace that is running as an app. First, locate the API endpoint you wish to use in the FME Flow REST API documentation, which you can find at http://&lt;your FME Flow host&gt;/fmeapiv4/docs/index.html. For example, to enable or disable a Schedule on your FME Flow from a Workspace App, you would use the PUT /schedules/{id}/enabled endpoint.&nbsp;</p>
<p><img src="images/1761170659306.jpg" alt="" /></p>
<p>The endpoint takes a single parameter, the schedule ID, as input. You can configure your workspace to enable or disable a single schedule, or use a user parameter to select which Schedule to enable or disable in your FME Flow. You would create a Choice parameter to choose the name of the Schedule, and it would reference the ID.&nbsp;</p>
<p><img src="images/1761171242539.jpg" alt="" /></p>
<p>Then, reference the parameter from the transformer that makes the API request in your workspace. The most common transformers for this purpose are the <a href="https://docs.safe.com/fme/html/FME-Form-Documentation/FME-Transformers/Transformers/httpcaller.htm?" target="_blank" rel="noopener">HTTPCaller</a> and <a href="https://docs.safe.com/fme/html/FME-Form-Documentation/FME-Transformers/Transformers/openapicaller.htm?" target="_blank" rel="noopener">OpenAPICaller</a>.&nbsp;</p>
<p><img src="images/1761171437174.jpg" alt="" /></p>
<p>From a Workspace App, the user only sees the Schedule Names from the Choice parameter. When they run the app, the workspace makes an API call to FME Flow to enable or disable the Schedule they've selected.&nbsp;</p>
<p><img src="images/1761171687296.jpg" alt="" /></p>
<h2>Webhook URLs to Run Workspaces</h2>
<p>Workspace Apps are limited to running a workspace once and only using one registered service, meaning you need two apps to run the same workspace with different services. You may want to run a workspace with multiple services if you wish to preview the data before writing it to its final location or downloading it. It's also slightly inconvenient to swap between and enter parameters for multiple apps.&nbsp;</p>
<p>Instead, you may link to a Webhook URL to run a workspace from a Workspace App description or from a Data Streaming result. Once you click the link, FME Flow will run the workspace using pre-set parameters. This workspace can be the same as the app's workspace, likely with a different service, or a different workspace altogether.&nbsp;</p>
<p>To create a Webhook URL, you configure your workspace to run from the Run Workspace page on FME Flow. Instead of clicking Run, scroll back up to the top, open Workspace Actions, and select Create a Webhook URL.&nbsp;</p>
<p><img src="images/1761240471042.jpg" alt="" /></p>
<p>The Create Webhook page will open, where you create a token to grant permission to run the workspace through the webhook. There's also a Webhook URL preview that will update to match the Parameters you set.&nbsp;</p>
<p><img src="images/1761240663862.jpg" alt="" /></p>
<p>Once you set your parameters and click Create, FME Flow creates the webhook and presents you with the opportunity to download the webhook and its instructions. For security reasons, this is your only opportunity to download this information. FME Flow also creates two URLs that you can use to run the workspace: one that uses Authentication with a Header and one that uses Authorization with a Query String. You may copy the URLs and token here.&nbsp;</p>
<p><img src="images/1761240973424.jpg" alt="" /></p>
<p>If you paste your URL into a new browser tab, the workspace will run, and FME Flow will return the result to you.&nbsp;</p>
<p><img src="images/1761244837210.jpg" alt="" /></p>
<p>You can paste the URL in a Workspace App description or footer text for users to click and run your workspace through the webhook.&nbsp;</p>
<p><img src="images/1761241609957.jpg" alt="" /></p>
<p>Alternatively, with greater flexibility, you can use the Webhook URL in a Data Streaming HTML report output by incorporating custom HTML into an <a href="https://docs.safe.com/fme/html/FME-Form-Documentation/FME-Transformers/Transformers/htmlreportgenerator.htm" target="_blank" rel="noopener">HTMLReportGenerator</a>. Using a webhook in a workspace output is even more flexible because you may take user input from the initial workspace using user parameters linked in the webhook.&nbsp;</p>
<p><img src="images/1761243806091.jpg" alt="" /></p>
<p>From an app, the URL will use the parameter value input from the app.&nbsp;</p>
<p><img src="images/1761245362817.jpg" alt="" /></p>
<blockquote>
<p><img src="images/1760042700791.png" alt="" /></p>
<p><strong>‚≠ê Coming soon in FME 2025.2: </strong>Query string parameters are coming to Flow Apps! You may complete this workflow and allow the user to pre-set parameters with a second Flow App instead of a Webhook URL.&nbsp;</p>
</blockquote>
<h2>Exercise</h2>
<p><img src="images/1760653697280.png" alt="" width="261" height="277" /></p>
<p>Frank is a GIS administrator working on a self-serve FME Flow App. His colleagues often ask him for business license data on food vendors. He frequently sends his colleagues data, and then they have follow-up requests for more data or different types of data. To make the data accessible to his colleagues and save himself time and effort in preparing the data, Frank is going to create a Workspace App that previews the data before downloading it. To accomplish this, Frank will create a Workspace App to run his workspace using the Data Streaming service. The workspace will stream an HTML report with a tabular preview of the data, and then provide a link to download the data. The link will be a Webhook URL that runs the same workspace as the app, but uses the Data Download service instead.</p>
<p>Follow along with Frank's steps as he creates a Webhook URL and a Workspace App for his workflow. He already has his workspace on FME Flow, and it runs successfully with the Data Download and Data Streaming services; however, he has yet to link the Data Streaming output to run the workspace with the Data Download service.&nbsp;</p>
<h3>1) Create a Webhook URL</h3>
<p>Frank navigates to and logs into his FME Flow. He opens the Run Workspace page and selects the Training repository. He then selects the FoodVendorBusinesses.fmw and sets it to the Data Download service. Under Published Parameters, Frank selects Downtown.&nbsp;</p>
<p><img src="images/1760991414905.png" alt="" /></p>
<p>Instead of scrolling down to the bottom of the page to run the workspace, Frank opens the Workspace Actions menu at the top and selects Create Webhook.&nbsp;</p>
<p><img src="images/1760991542724.png" alt="" /></p>
<p>The Create Webhook page opens. It creates a token to authenticate and run the workspace through the webhook and previews the URL.&nbsp;</p>
<p><img src="images/1760992690561.png" alt="" /></p>
<p>Frank scrolls down and expands Parameters. If he changes the neighborhood, the Webhook URL Preview immediately changes to reflect the parameter change.&nbsp;</p>
<p><img src="images/1760992370386.png" alt="" /> <img src="images/1760992435641.png" alt="" /></p>
<p>Frank will use this functionality to pull the parameter value the user selects in the App into the Webhook URL.&nbsp;</p>
<p>Frank scrolls down to the bottom of the page and selects Create.&nbsp;</p>
<p><img src="images/1760992858130.png" alt="" /></p>
<p>On the next page, Frank scrolls down and copies the Authorization with Query String URL. In the next step, he will paste this into his workspace.</p>
<p><img src="images/1760993047751.png" alt="" /></p>
<h3>2) Add Webhook to Workspace</h3>
<p>With his webhook copied, Frank opens <a href="https://s3.amazonaws.com/FMEData/FMEData/Workspaces/CreateDataIntegrationApps/FoodVendorBusinesses.fmw" target="_self">his workspace</a> (C:\FMEData\Workspaces\CreateDataIntegrationApps\FoodVendorBusinesses.fmw)&nbsp; in FME Workbench. The workspace reads Food Vendors and Business Licenses, joins them on the Business Name attribute, filters the vendors by a neighborhood set with a user parameter, then writes a CSV and an HTML report with the data.&nbsp;</p>
<p><img src="images/1760993518857.png" alt="" /></p>
<p>Frank will link his workspace webhook in the HTML report, so he opens the HTMLReportGenerator settings by double-clicking the transformer. Under Page Contents, Frank selects Custom HTML and then scrolls to the bottom of the HTML code to the body section.&nbsp;</p>
<p><img src="images/1760993944996.png" alt="" /></p>
<p>Frank selects <span style="color: #e03e2d;"><strong>&lt;your webhook URL&gt;</strong></span> and replaces it by pasting his webhook URL, which he copied from FME Flow.&nbsp;</p>
<p>Once he pastes the URL, he scrolls to the right in the text to find the NEIGHBORHOOD parameter. He selects the default parameter value and replaces it with the NEIGHBORHOOD user parameter by double-clicking it in the left pane in Content Settings.&nbsp;</p>
<p><img src="images/1760997468918.png" alt="" /></p>
<p><img src="images/1760997854915.png" alt="" width="1400" height="545" /></p>
<p>Frank only modifies line 62, and when complete, it should be like the following:</p>
<pre class="language-markup"><code>&lt;p&gt;&lt;a href="http://fmetraining/fmedatadownload/Training/FoodVendorBusinesses.fmw?NEIGHBORHOOD=$(NEIGHBORHOOD)&amp;opt_showresult=false&amp;opt_servicemode=sync&amp;token=bc71067504bd1d8c44f6820e182a43ed587315b7"&gt;Download Excel Sheet&lt;/a&gt;&lt;/p&gt;</code></pre>
<p>Frank clicks OK to close the HTMLReportGenerator and saves his workspace.&nbsp;</p>
<h3>3) Publish to FME Flow</h3>
<p>Frank publishes his workspace to FME Flow. He replaces his existing workspace, FoodVendorBusinesses.fmw, in the Training repository by overwriting it.&nbsp;</p>
<p><img src="images/1760998850434.jpg" alt="" /></p>
<p>Frank clicks Next and receives a warning about overwriting the workspace. He confirms his action and clicks Replace.&nbsp;</p>
<p><img src="images/1760998678791.jpg" alt="" /></p>
<p>Next, Frank ensures Data Download, Job Submitter, and Data Streaming are all selected for the Register Services step and clicks Publish.&nbsp;</p>
<p><img src="images/1760999226846.jpg" alt="" /></p>
<h3>4) Create Workspace App</h3>
<p>Frank returns to FME Flow and opens Create Workspace App. He gives his app a name, title, and description. Frank then selects the FoodVendorBusinesses.fmw workspace from the Training repository and selects the Data Streaming service.&nbsp;</p>
<p><img src="images/1761000292312.jpg" alt="" /></p>
<p>Frank doesn't alter any settings in Parameter Defaults or Customize. He clicks Create, then opens his app from the URL that FME Flow generates.&nbsp;</p>
<h3>5) Run Workspace App</h3>
<p>On his app, Frank selects a neighborhood from the drop-down and clicks Run.&nbsp;</p>
<p><img src="images/1761000809504.jpg" alt="" /></p>
<p>FME Flow processes the workspace and presents a table of data in the HTML report. Below the table, Frank clicks the Download Excel Sheet button.&nbsp;</p>
<p><img src="images/1761000982943.jpg" alt="" /></p>
<blockquote>
<p><img src="images/1760042700791.png" alt="" /></p>
<p>If Frank or another app user decides this is not the data they want, they can use the browser back button to return to the app, set different parameter values, then run it again.&nbsp;</p>
</blockquote>
<p>FME Flow reruns the workspace through the Webhook URL. This time, the workspace uses the Data Download service and presents Frank with a URL he clicks to download the data.&nbsp;</p>
<p><img src="images/1761001720405.jpg" alt="" /></p>
<p>Frank extracts the zip file and opens the XLSX file in FME Data Inspector. The data matches the preview from the app.&nbsp;</p>
<p><img src="images/1761001975088.jpg" alt="" /></p>
<p>Frank has successfully created a Webhook URL, embedded it in an HTML report streamed from a Workspace App, and then used the app to preview and download data.&nbsp;</p>