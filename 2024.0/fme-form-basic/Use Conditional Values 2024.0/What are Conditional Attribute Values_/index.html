<h2 id="learning-objectives">Learning Objectives</h2>
<p>After completing this lesson, you&rsquo;ll be able to:</p>
<ul>
<li>Explain how conditional attribute values let you reduce workspace clutter.</li>
<li>Understand how to fill in Parameter Condition Definition dialogs.</li>
</ul>
<h2 id="transformer-based-attribute-mapping">Transformer-Based Attribute Mapping</h2>
<p>After filtering your data with a transformer like the Tester or the TestFilter, you can create attributes or set their values based on these divisions. Here, an author divides data into neighborhoods using a postcode attribute and the TestFilter:</p>
<p><img class="image" src="images/1714589156240.png" alt="Example using data mapping and filtering transformers" width="498" height="351"></p>
<p>However, many AttributeManager transformers like this are not a good idea. They bloat the workspace, making it hard to navigate and edit. They don't scale well, either. Since each value needs a separate TestFilter port and AttributeManager combination, it's easy to imagine the difficulties involved with more than 50 values!</p>
<p>One solution is to use a simple&nbsp;<a href="https://docs.safe.com/fme/html/FME-Form-Documentation/FME-Transformers/Transformers/attributevaluemapper.htm" target="_blank" rel="noopener">AttributeValueMapper</a> transformer. However, that transformer only permits a single simple condition, such as X=Y. If a more advanced set of conditions is required, the preferred solution is conditional attribute values.</p>
<h2 id="what-are-conditional-attribute-values">What are Conditional Attribute Values?</h2>
<p>You can use conditional attribute values instead of many transformers of the same type. Instead of creating a set of conditions and values as separate objects in a workspace, you set both conditions and values inside a single transformer.</p>
<p>The option for conditional attribute values is in the drop-down dialog wherever you can provide an attribute value. For example, in the AttributeManager:</p>
<p><img class="image" src="images/1714589172937.png" alt="Conditional Value.. option in the Attribute Manager" width="647" height="449"></p>
<p>In the above screenshot, a workspace author creates a new attribute called NEIGHBORHOOD. The values for NEIGHBORHOOD are conditional upon other attribute values and &ndash; in this example &ndash; are set up like this:</p>
<p><img class="image" src="images/1714589184546.png" alt="Defining Condition Statements" width="548" height="417"></p>
<blockquote>
<p><img class="img mtm" role="presentation" src="https://safemytrailhead.s3.us-west-2.amazonaws.com/images/safe_note.png" alt="Note"></p>
<p><span style="font-family: inherit; font-size: 1em;">Copy and paste conditions using the Copy Row and Paste Row buttons to save time and prevent data entry errors. You can copy and paste between transformers of a similar style, e.g., the Tester and TestFilter.</span></p>
</blockquote>
<p>Like the AttributeValueMapper, a series of conditions (left) map to different values (right). However, unlike the AttributeValueMapper, this dialog allows much more complex conditions than a simple 1:1 mapping. That&rsquo;s because full test capabilities are built into this dialog.</p>
<p>The conditions are defined by double-clicking in the Test Condition field to open up a Tester-style dialog. Both the condition and the output value can be set within this dialog:</p>
<p><img class="image" src="images/1714589193341.png" alt="Setting the Attribute Value result of a test" width="453" height="354"></p>
<p>Many options beyond simple text or numbers are available for setting the Attribute Value in the Parameter Conditional Definition dialog:</p>
<p><img class="image image-block" src="images/1714589208239.png" alt="Options for Attribute Value result from a test" width="745" height="377"></p>
<p>Once the conditions are set, the original dialog &ndash; in this case, an AttributeManager &ndash; looks like this, with the number of conditions defining the number of possible values:</p>
<p><img class="image" src="images/1714589226358.png" alt="AttributeManager showing multiple possible values" width="866" height="127"></p>
<blockquote>
<p><img class="img mtm" role="presentation" src="https://safemytrailhead.s3.us-west-2.amazonaws.com/images/safe_note.png" alt="Note"></p>
<p><span style="font-family: inherit; font-size: 1em;">Like attribute construction, conditional values apply to attributes and most FME parameters. For example, you can create labels conditional upon specific tests using the Labeller transformer itself:</span></p>
<p><span style="font-family: inherit; font-size: 1em;"><img src="images/1714589236846.png" alt="Using conditional values for an FME parameter" width="345" height="191"></span></p>
<p><span style="font-family: inherit; font-size: 1em;">This way, you don't have to create the labels in an AttributeManager and then apply them in the Labeller as a separate task.</span></p>
</blockquote>
<blockquote>
<p><img class="img mtm" role="presentation" src="https://safemytrailhead.s3.us-west-2.amazonaws.com/images/safe_note.png" alt="Note"></p>
<p><span style="font-family: inherit; font-size: 1em;">You can use cached values in some transformers when providing an attribute value. This feature makes it faster and easier to build tests. For example, you could use this feature to filter out a specific value from NEIGHBORHOOD, searching the list of neighborhood names to find the correct one.</span></p>
<p><span style="font-family: inherit; font-size: 1em;">In a transformer with a cache and an attribute value parameter, click the drop-down arrow and choose </span><strong style="font-family: inherit; font-size: 1em;">Cached Values&nbsp;</strong><span style="font-family: inherit; font-size: 1em;">(if available). A list of values is displayed to choose from, including a search filter.</span></p>
</blockquote>
<h2 id="when-to-use-conditional-attribute-values">When to use Conditional Attribute Values?</h2>
<p>Conditional attribute values are great for mapping (or setting) an attribute in relation to the value of an existing attribute and when the conditions are more complex than can be handled in a simple AttributeValueMapper (or AttributeRangeMapper) transformer.</p>
<p>In essence, conditional values are like a combination of TestFilter and AttributeCreators.</p>